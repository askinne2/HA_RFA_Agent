# Curl Examples for HA Request Line AI Assistant

## Messaging Endpoints

### Send an SMS Message
```bash
curl -X POST https://your-domain/channels/messaging/incoming \
  -H "Content-Type: application/json" \
  -d '{
    "Body": "Hello, I need help with housing",
    "From": "+1234567890",
    "To": "+1987654321"
  }'
```

### Receive Message Response
```bash
curl -X POST https://your-domain/channels/messaging/response \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "Body": "Here are some housing resources...",
    "Identity": "phone:+1234567890",
    "SessionId": "webhook:messaging__YOUR_SESSION_ID"
  }'
```

## Conversation Endpoints

### Start a New Conversation
```bash
curl -X POST https://your-domain/channels/conversations/messageAdded \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "Body": "I need information about healthcare services",
    "ConversationSid": "CHXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
    "ChatServiceSid": "ISXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
    "Author": "user_id:12345"
  }'
```

### Get Conversation Response
```bash
curl -X POST https://your-domain/channels/conversations/response \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "Body": "Here are healthcare resources...",
    "SessionId": "webhook:conversations__ISXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX/CHXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
    "_token": "YOUR_VERIFICATION_TOKEN"
  }'
```

## Tool Endpoints

### Google Maps Search
```bash
curl -X POST https://your-domain/tools/google-maps \
  -H "Content-Type: application/json" \
  -d '{
    "location": "Columbia, SC",
    "name": "health clinic"
  }'
```

### Handover to Human Agent (Studio)
```bash
curl -X POST https://your-domain/tools/studio-handover \
  -H "Content-Type: application/json" \
  -H "x-session-id: webhook:conversations__ISXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX/CHXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX" \
  -d '{
    "FlowSid": "FWXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
    "SuccessMessage": "Connecting you to a human agent..."
  }'
```

### Handover to Human Agent (Flex)
```bash
curl -X POST https://your-domain/tools/flex-handover \
  -H "Content-Type: application/json" \
  -H "x-session-id: webhook:conversations__ISXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX/CHXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX" \
  -H "x-identity: user_id:12345" \
  -d '{
    "FlexWorkflowSid": "WWXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
    "FlexWorkspaceSid": "WSXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
  }'
```

## Notes
- Replace `YOUR_TOKEN` with your actual authentication token
- Replace `YOUR_DOMAIN` with your actual domain
- Replace SIDs (CH, IS, FW, WW, WS) with your actual Twilio SIDs
- Phone numbers should be in E.164 format (e.g., +1234567890)
- The `_token` parameter is generated by the server and should be included in responses 